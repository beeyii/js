<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Canvas Example</title>
	<style type="text/css">
		canvas{
			border: 1px solid black;
		}

	</style>

</head>
<body>
	<!-- <h1>Canvas Example</h1> -->
  <label for="color_input" id="color_label" style="background-color: red"></label>
  <canvas id="canvas">
    Main drawing canvas. 
  </canvas>

  <canvas id="color_block">
    color block canvas. 
  </canvas>
  <canvas id="color_strip">
    color strip canvas. 
  </canvas>

<script>
	var canvas = document.querySelector('canvas');
	var ctx = canvas.getContext('2d');
  canvas.width = window.innerWidth * 0.8;
  canvas.height = window.innerHeight * 0.8;
  var x = 0;
  var y = 0;
  var color = "red";
  var radius = 15;
  draw();

  function draw(x, y) {
    ctx.beginPath();
    ctx.fillStyle = color;
    ctx.arc(x, y, radius, 0, 2 * Math.PI);
    ctx.fill();
  }

  window.addEventListener("mousemove", function(e) {
    draw(e.pageX, e.pageY);
  });

  window.addEventListener("keydown", function(e) {
    if(e.code == "KeyB") {
      color = "blue";
    }
    else if(e.code == "KeyG") {
      color = "green";
    }
    else if(e.code == "KeyY") {
      color = "yellow";
    }
    else if(e.code == "KeyR") {
      color = "red";
    }
    else if(e.code == "Space") {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
    }
    else if(e.code == "ArrowUp") {
      radius += 1;
    }
    else if(e.code == "ArrowDown") {
      if(radius > 1) {
        radius -= 1;
      }
      else {
        radius = radius;
      }
    }
  })

  window.addEventListener('resize', function() {
    canvas.width = window.innerWidth * 0.8;
    canvas.height = window.innerHeight * 0.8;
  });
  
  window.addEventListener('orientationchange', function() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
  });



var colorBlock = document.getElementById('color_block');
var ctx1 = colorBlock.getContext('2d');
var width1 = colorBlock.width;
var height1 = colorBlock.height;

var colorStrip = document.getElementById('color_strip');
var ctx2 = colorStrip.getContext('2d');
var width2 = colorStrip.width;
var height2 = colorStrip.height;

var colorLabel = document.getElementById('color_label');

var drag = false;
var rgbaColor = 'rgba(255,0,0,1)';

ctx.rect(0, 0, width1, height1);
fillGradient();

ctx.rect(0, 0, width2, height2);
var grd1 = ctx2.createLinearGradient(0, 0, 0, height1);
grd1.addColorStop(0, 'rgba(255, 0, 0, 1)');
grd1.addColorStop(0.17, 'rgba(255, 255, 0, 1)');
grd1.addColorStop(0.34, 'rgba(0, 255, 0, 1)');
grd1.addColorStop(0.51, 'rgba(0, 255, 255, 1)');
grd1.addColorStop(0.68, 'rgba(0, 0, 255, 1)');
grd1.addColorStop(0.85, 'rgba(255, 0, 255, 1)');
grd1.addColorStop(1, 'rgba(255, 0, 0, 1)');
ctx2.fillStyle = grd1;
ctx2.fill();

function click(e) {
  x = e.offsetX;
  y = e.offsetY;
  var imageData = ctx2.getImageData(x, y, 1, 1).data;
  rgbaColor = 'rgba(' + imageData[0] + ',' + imageData[1] + ',' + imageData[2] + ',1)';
  fillGradient();
}

function fillGradient() {
  ctx1.fillStyle = rgbaColor;
  ctx1.fillRect(0, 0, width1, height1);

  var grdWhite = ctx2.createLinearGradient(0, 0, width1, 0);
  grdWhite.addColorStop(0, 'rgba(255,255,255,1)');
  grdWhite.addColorStop(1, 'rgba(255,255,255,0)');
  ctx1.fillStyle = grdWhite;
  ctx1.fillRect(0, 0, width1, height1);

  var grdBlack = ctx2.createLinearGradient(0, 0, 0, height1);
  grdBlack.addColorStop(0, 'rgba(0,0,0,0)');
  grdBlack.addColorStop(1, 'rgba(0,0,0,1)');
  ctx1.fillStyle = grdBlack;
  ctx1.fillRect(0, 0, width1, height1);
}

function mousedown(e) {
  drag = true;
  changeColor(e);
}

function mousemove(e) {
  if (drag) {
    changeColor(e);
  }
}

function mouseup(e) {
  drag = false;
}

function changeColor(e) {
  x = e.offsetX;
  y = e.offsetY;
  var imageData = ctx1.getImageData(x, y, 1, 1).data;
  rgbaColor = 'rgba(' + imageData[0] + ',' + imageData[1] + ',' + imageData[2] + ',1)';
  colorLabel.style.backgroundColor = rgbaColor;
}

colorStrip.addEventListener("click", click, false);

colorBlock.addEventListener("mousedown", mousedown, false);
colorBlock.addEventListener("mouseup", mouseup, false);
colorBlock.addEventListener("mousemove", mousemove, false);
</script>


  <br>
  <input type="file" id="myFile" size="50" onchange="myFunction()">
  <br>

</body>
</html>